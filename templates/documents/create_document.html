{% extends "layouts/base.html" %}

{% block title %} Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª {% endblock %} 

{% block stylesheets %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Cairo', sans-serif; background-color: #f4f4f4; }
    .card { box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 1rem; }
    .btn-scan { background-color: #198754; color: white; }
    .btn-scan:hover { background-color: #157347; }
    .preview-box { border: 2px dashed #aaa; padding: 10px; text-align: center; margin-top: 10px; border-radius: 10px; background-color: #fff; max-height: 300px; overflow: auto; }
    .preview-box img { max-width: 100%; border-radius: 5px; }
    #sign_users { min-height: 100px; }
</style>
{% endblock %}

{% block content %}
<section class="pcoded-main-container">
    <div class="pcoded-content">
        <!-- Breadcrumb -->
        <div class="page-header" dir="rtl">
            <h5 class="m-b-10">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ğŸ“‚</h5>
            <ul class="breadcrumb">
                <li class="breadcrumb-item"><a href="/"><i class="feather icon-home"></i></a></li>
                <li class="breadcrumb-item active">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</li>
            </ul>
        </div>








        <!-- Form -->
        <form id="multi-form" enctype="multipart/form-data">
          
                              <div class="mb-3 ">
                        <label for="document_type">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ </label>
                        <select class="form-select tag-select form-control"
                        id="document_type" name="document_type_id" >

                        </select>

                    </div>
          
            <div class="card p-4 mx-auto mb-4" style="max-width: 800px;">
                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="doc_id">Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯</label>
                        <input type="text" name="doc_id" class="form-control" id="doc_id">
                    </div>
                    <div class="col-md-4">
                        <label for="transfer_number">Ø±Ù‚Ù… Ø§Ù„Ø­ÙˆØ§Ù„Ø©</label>
                        <input type="text" name="transfer_number" class="form-control" id="transfer_number">
                    </div>
                    <div class="col-md-4">
                        <label for="sender_name"> 
                        Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„
                        </label>
                        <input type="text" name="sender_name" class="form-control" id="sender_name">
                    </div>
                    <div class="col-md-4">
                        <label for="recipient_name">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…</label>
                        <input type="text" name="recipient_name" class="form-control" id="recipient_name">
                    </div>
           

                <div class="col-md-4">
                    <label for="date"> ØªØ§Ø±ÙŠØ® Ø§Ù„Ø³Ù†Ø¯ </label>
                    <input type="date" name="date" class="form-control" id="date">
                </div>
     </div>
                <!-- Ø·Ù„Ø¨ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ -->
                <div class="card p-3 mb-4">
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="require_signature" name="is_signature">
                        <label class="form-check-label" for="require_signature">Ø·Ù„Ø¨ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯</label>
                    </div>
                    <div class="mb-3 d-none " id="sign-users-container">
                        <label for="sign_users">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ù„ØªÙˆÙ‚ÙŠØ¹</label>
                        <select class="form-select tag-select" id="sign_users" name="user_signature" >

                        </select>
                        <div class="invalid-feedback">ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„ØªÙˆÙ‚ÙŠØ¹.</div>
                    </div>
                </div>

                <!-- Documents Container -->
                <div id="documents-container" class="row mb-3"></div>

                <div class="text-end my-3">
                    <button type="button" class="btn btn-outline-primary" id="add-doc">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ†Ø¯ Ø¬Ø¯ÙŠØ¯</button>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary mb-2">Ø­ÙØ¸</button>
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn btn-scan">ğŸ’¾ Ø­ÙØ¸ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</button>
                </div>

                <div id="result" class="mt-4"></div>
            </div>
        </form>
    </div>
</section>
{% endblock %}

{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js"></script>

<script>
$(document).ready(function() {
    $('.tag-select').select2({
        tags: true, // Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨ÙƒØªØ§Ø¨Ø© ÙˆØ¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
        dir: "rtl",
        width: 'resolve',
        language: {
            noResults: function () {
                return "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬";
            },
            searching: function () {
                return "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...";
            }
        }
    });
});
</script>
<script>
let users=[];
    loadUsers();
let documents_type=[];
    loaddocuments_type();

async function loaddocuments_type() {
    const doctypSelect = document.getElementById('document_type');
   
    
    try {
      if(users.length<1){
            doctypSelect.innerHTML = '<option value="">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</option>';
      const response = await fetch("{{ url_for('documents_blueprint.getdocument_types') }}"); // ØºÙŠÙ‘Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ø­Ø³Ø¨ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
       documents_type = await response.json();

      }
      // Ù…Ù„Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
      doctypSelect.innerHTML  = '';
      documents_type.forEach(user => {
        const option = document.createElement('option');
        option.value = user.id; // Ø£Ùˆ branch.code Ø­Ø³Ø¨ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        option.textContent = user.name;
        doctypSelect.appendChild(option);
      });
    } catch (error) {
      doctypSelect.innerHTML = '<option value="">ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„</option>';
     showError('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª:');
      console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ù‚Ø³Ø§Ù…:', error);
    }
  }
 // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹ Ù…Ù† Ø§Ù„Ù€ API
  async function loadUsers() {
    const userSelect = document.getElementById('sign_users');
   
    
    try {
      if(users.length<1){
            userSelect.innerHTML = '<option value="">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</option>';
      const response = await fetch("{{ url_for('users_blueprint.getusers') }}"); // ØºÙŠÙ‘Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ø­Ø³Ø¨ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
       users = await response.json();

      }
      // Ù…Ù„Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
      userSelect.innerHTML  = '<option value="0">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ¸Ù </option>';
      users.forEach(user => {
        const option = document.createElement('option');
        option.value = user.id; // Ø£Ùˆ branch.code Ø­Ø³Ø¨ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        option.textContent = user.full_name+"/"+user.phone;
        userSelect.appendChild(option);
      });
    } catch (error) {
      userSelect.innerHTML = '<option value="">ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„</option>';
     showError('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª:');
      console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª:', error);
    }
    userSelect.value=0;
  }
  </script>
<script>
let docIndex = 0;
function createDocBlock(index) {
    return `
    <div class="card p-4 mx-auto border shadow-sm rounded-3 mb-4 document-block col-md-6" style="max-width: 500px;">
        <h5 class="mb-3 fw-bold text-primary">ğŸ“„ Ù…Ø³ØªÙ†Ø¯ Ø±Ù‚Ù… ${index + 1}</h5>
        
        <div class="mb-3">
            <div class="btn-group w-100" role="group">
                <button type="button" class="btn btn-outline-secondary" onclick="openCamera(${index})">ğŸ“·  </button>
                <button type="button" class="btn btn-outline-success" onclick="scan(${index})">ğŸ–¨ï¸  </button>
                <button type="button" class="btn btn-outline-primary" onclick="document.getElementById('file-input-${index}').click()">ğŸ“  </button>
            </div>
              <input type="text" id="file-path-${index}" required readonly
                     name="docs[${index}][path]" class="form-control"/>
                     
            <input type="file" id="file-input-${index}" accept="*/*" name="docs[${index}][file]" class="form-control d-none" onchange="loadFilePreview(this, ${index})">
        </div>

        <div id="preview-${index}" class="preview-box border rounded p-2 text-center" style="min-height: 150px;">
            <em class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ø¨Ø¹Ø¯.</em>
        </div>

        <div class="mb-2 mt-4">
            <label class="form-label fw-bold">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ†Ø¯</label>
            <span class="btn btn-sm btn-outline-info" onclick="toggleDetails(${index}, this)">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</span>
            <div class="progress mt-2 d-none" id="progress-${index}">
                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;" id="progress-bar-${index}">0%</div>
            </div>
            <div class="details_doc mt-2" style="display:none">
                <textarea name="docs[${index}][details]" class="form-control mb-2" rows="3" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ ÙˆØµÙ Ø§Ù„Ù…Ø³ØªÙ†Ø¯..."></textarea>
                <pre id="pre-${index}" class="bg-light p-2 rounded"></pre>
                <div id="pre2-${index}" class="row" lass="bg-light p-2 rounded"></div>
            </div>
        </div>

        <button type="button" class="btn btn-sm btn-danger mt-2 w-100 remove-doc">ğŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯</button>
    </div>
    `;
}
function openCamera(index) {
    const input = document.getElementById(`file-input-${index}`);
    input.setAttribute('capture', 'environment');
    input.click();
}

function loadFilePreview(input, index) {
    const file = input.files[0];
    const previewBox = document.getElementById(`preview-${index}`);
uploadDocument(file, index);
    if (file && file.type.startsWith("image")) {
        const reader = new FileReader();
        reader.onload = function (e) {
            previewBox.innerHTML = `<img src="${e.target.result}" class="img-fluid rounded shadow-sm" style="max-height: 300px;">`;
            
        };
        reader.readAsDataURL(file);
    } else {
        previewBox.innerHTML = `<em class="text-muted">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ØµØ§Ù„Ø­Ø©.</em>`;
    }
}

function toggleDetails(index, btn) {
    const details = btn.closest(".card").querySelector(".details_doc");
    details.style.display = (details.style.display === 'none' || details.style.display === '') ? 'block' : 'none';
    btn.textContent = details.style.display === 'block' ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙØ§ØµÙŠÙ„' : 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„';
}





function show_details_doc(index, e) {
    const det = $(e).closest('.cdetails').find('.details_doc');
    det.slideToggle();
    $(e).text(det.is(':visible') ? '-' : '+');
}

function updateHandlers() {
    $('.source-select').off('change').on('change', function() {
        const index = $(this).data('index');
        const block = $(this).closest('.document-block');
        if ($(this).val() === 'upload') {
            block.find('.upload-block').removeClass('d-none');
            block.find(`#result-${index}`).addClass('d-none');
        } else {
            scan(index);
            block.find(`#result-${index}`).removeClass('d-none');
            block.find('.upload-block').addClass('d-none');
        }
    });

    $('.remove-doc').off('click').on('click', function() {
        $(this).closest('.document-block').remove();
    });
}

function loadfile(f) {
    const index = $(f).data('index');
    const file = f.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            $(`#progress-${index}`).removeClass('d-none');
            $(`#preview-${index}`).html(`<img src="${e.target.result}" alt="Preview">`);
            uploadDocument(file, index);
        };
        reader.readAsDataURL(file);
    }
}

function scan(index) {
    $(`#result-${index} .alert`).html('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø³Ø­ Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø·...');
    $.ajax({ url: '/scan', type: 'POST', success: function(response) {
        if (response.success) {
            $(`#preview-${index}`).html(`<img src="${response.image_url}" alt="Preview">`);
        var inp=$(`input[name="docs[${index}][path]"]`)
        inp.attr('readonly',false);
        inp.val(response.image_url);
        inp.attr('readonly',true);
            uploadDocument(null,index,response.image_url);
        } else {
            $(`#result-${index} .alert`).html('Ø®Ø·Ø£: ' + response.error);
        }
    }, error: function() {
        $(`#result-${index} .alert`).html('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….');
    }});
}

function uploadDocument(file=null, index,path=null) {
 // alert(index+'');
 $(`#progress-${index}`).removeClass('d-none');
    const formData = new FormData();
    if(path!==null){
      formData.append('path', path);
    }else{
    formData.append('file', file);
    }
    const xhr = new XMLHttpRequest(); xhr.open('POST', '/read-doc', true);
    xhr.upload.addEventListener('progress', function(e) {
        if (e.lengthComputable) {
            const percent = Math.round((e.loaded / e.total) * 100);
            $(`#progress-bar-${index}`).css('width', percent + '%').text(percent + '%');
        }
    });
    xhr.onload = function() {
        if (xhr.status === 200) {
            const res = JSON.parse(xhr.responseText);
            if (res.success) {
                $(`#progress-${index}`).addClass('d-none');
               $(`#pre-${index}`).html(res.text);
               convert(res.text);
               const sentences = res.text.match(/[^.!?]+[.!?]+[\n]*/g) || [res.text];
const badges = sentences.map((s, i) => 
    `<div class="col"><span class="badge bg-primary m-2 copy-badge "
    data-text="${s.trim()}" style="cursor:pointer;">${s.trim()}</span></div>`
).join('');
$(`#pre2-${index}`).html(badges);
// Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ø³Ø® Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ù„Ø©

               

                $(`textarea[name="docs[${index}][details]"]`).val(res.text);
                $(`input[name="docs[${index}][path]"]`).val(res.processed_image_path);
                $(`#preview-${index}`).append(`<img src="${res.processed_image_path}" alt="Preview">`);
                
                $(`#pre2-${index}`).on('click', '.copy-badge',function () {
    const text = $(this).data('text');
    navigator.clipboard.writeText(text).then(() => {
        // Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø³ÙŠØ·
        //alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¬Ù…Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©');
        const toast = new bootstrap.Toast(document.getElementById('toast-copy'));
toast.show();

        // Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Toast Ø¥Ù† Ø£Ø±Ø¯Øª ØªÙ†Ø³ÙŠÙ‚Ù‹Ø§ Ø£Ø¬Ù…Ù„
        // showToast('âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!');
    }).catch(err => {
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®');
    });
});
            }
        } else {
            //$(`#progress-${index}`).addClass('d-none');
        }
    };
    xhr.send(formData);
}

// ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯: Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙˆØ­Ù‚Ù„ Ø¥Ù„Ø²Ø§Ù…ÙŠ
$('#require_signature').on('change', function() {
    if ($(this).is(':checked')) {
        $('#sign-users-container').removeClass('d-none');
        $('#sign_users').attr('required', true);
    } else {
        $('#sign-users-container').addClass('d-none');
        $('#sign_users').removeAttr('required').removeClass('is-invalid');
    }
});

// Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ†Ø¯
$('#add-doc').on('click', function() {
    $('#documents-container').append(createDocBlock(docIndex));
    updateHandlers(); docIndex++;
});

// ÙØ­Øµ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„


// Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ù…Ø³ØªÙ†Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
$('#add-doc').click();


$('#multi-form').on('submit', function (e) {
    e.preventDefault();
    if ($('#require_signature').is(':checked') && $('#sign_users').val().length === 0) {
        e.preventDefault();
        $('#sign_users').addClass('is-invalid');
        return;
    }
    
    const formData = new FormData(this);
    $('#result').html('â³ Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª...');

    $.ajax({
        url: '/save-docs',
        method: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function (res) {
            if (res.success) {
                $('#result').html('<h5>âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­</h5>');
                $('#multi-form')[0].reset();
                $('#documents-container').empty();
                docIndex = 0;
                document.getElementById('sign_users').value=0;
                        $('#sign-users-container').addClass('d-none');
        $('#sign_users').removeAttr('required').removeClass('is-invalid');
            } else {
                $('#result').html('âŒ Ø®Ø·Ø£: ' + res.message);
            }
        },
        error: function () {
            $('#result').html('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….');
        }
    });
});


function convert(text){
	  // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„ØªØ¹Ø§Ø¨ÙŠØ± Ø§Ù„Ù†Ù…Ø·ÙŠØ©
const remittanceNumber = text.match(/Ø±Ù‚Ù… Ø§Ù„Ø­ÙˆØ§Ù„Ø©\/\s*\|?\s*(\d+)/)?.[1] || "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
const senderName = text.match(/Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„\s*\/\s*[.|]?\s*(.+)/)?.[1]?.trim() || "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
const receiverName = text.match(/Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…\s*\/\s*[.|]?\s*(.+)/)?.[1]?.trim() || "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
const receiptNumber = text.match(/Ø±Ù‚Ù… Ø§Ù„Ø³Ù†Ø¯\s*\/\s*(\d+)/)?.[1] || "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
const date = text.match(/(\d{1,2}\/\d{1,2}\/\d{2,4})/)?.[1] || "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
//transfer_number
      //      doc_id
            
            
            $("#sender_name").val(senderName);
            $("#recipient_name").val(receiverName);
            $("#transfer_number").val(remittanceNumber);
            $("#date").val(date);
            $("#doc_id").val(receiptNumber);
// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
console.log("Ø±Ù‚Ù… Ø§Ù„Ø­ÙˆØ§Ù„Ø©:", remittanceNumber);
console.log("Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„:", senderName);
console.log("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…:", receiverName);
console.log("Ø±Ù‚Ù… Ø§Ù„Ø³Ù†Ø¯:", receiptNumber);
console.log("Ø§Ù„ØªØ§Ø±ÙŠØ®:", date);
	}

</script>
<div id="toast-copy" class="toast position-fixed bottom-0 end-0 m-3 text-bg-success" role="alert" data-bs-delay="1500">
  <div class="toast-body">ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…</div>
</div>

{% endblock %}
